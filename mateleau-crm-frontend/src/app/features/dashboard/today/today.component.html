<!-- üìÖ Aujourd‚Äôhui -->
<section class="bg-white shadow rounded-xl p-6 mb-8">
  <h2 class="text-2xl font-bold text-blue-700 mb-4">üìÖ Aujourd‚Äôhui</h2>

  @if (todayDives.length) {
  <div class="mb-4">
    <h3 class="font-semibold text-gray-700 mb-2">Plong√©es pr√©vues :</h3>

    <ul class="grid gap-2">
      @for (dive of todayDives; track dive._id) {
      <li class="flex items-center justify-between gap-3 rounded-xl border p-3 shadow-sm">
        <p class="min-w-0 truncate text-sm text-gray-700">
          <span class="font-semibold">{{ dive.name }}</span>
          ‚Äì {{ dive.location }} ‚Ä¢ {{ dive.date | date:'HH:mm' }}
        </p>

        <button type="button" (click)="sendRemindEmail(dive._id)" class="shrink-0 inline-flex items-center gap-1.5 rounded-full px-3 py-1.5 text-xs font-semibold
                     bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800
                     focus:outline-none focus:ring-2 focus:ring-blue-500/40 whitespace-nowrap transition"
          aria-label="Envoyer un rappel">

          Envoyer un rappel
        </button>
      </li>
      }
    </ul>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de plong√©e pr√©vue pour aujourd‚Äôhui.</p>
  }

  @if (todayEquipment.length) {
  <div class="mb-4">
    <h3 class="font-semibold text-gray-700 mb-2">Mat√©riel √† r√©viser :</h3>
    <div class="flex flex-wrap gap-2">
      @for (eq of todayEquipment; track eq._id) {
      <span class="inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-gray-50">
        <mat-icon class="!text-base text-gray-600">build</mat-icon>
        {{ eq.name }}
      </span>
      }
    </div>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de mat√©riel √† r√©viser pour aujourd‚Äôhui.</p>
  }

  @if (todayBoats.length) {
  <div>
    <h3 class="font-semibold text-gray-700 mb-2">Bateaux √† r√©viser :</h3>
    <div class="flex flex-wrap gap-2">
      @for (boat of todayBoats; track boat._id) {
      <span class="inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-gray-50">
        <mat-icon class="!text-base text-gray-600">directions_boat</mat-icon>
        {{ boat.name }}
      </span>
      }
    </div>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de bateaux √† r√©viser pour aujourd‚Äôhui.</p>
  }
</section>

<!-- üìÜ √Ä venir cette semaine -->
<section class="bg-white shadow rounded-xl p-6 mb-8">
  <h2 class="text-2xl font-bold text-blue-700 mb-4">üìÜ √Ä venir cette semaine</h2>

  @if (weekDives.length) {
  <div class="mb-6">
    <h3 class="mb-3 font-semibold text-gray-700">Plong√©es</h3>

    <ul class="grid gap-2">
      @for (dive of weekDives; track dive._id) {
      <li
        class="flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 rounded-xl border p-3 sm:p-4 shadow-sm">
        <!-- Texte -->
        <p class="min-w-0 text-sm sm:text-base text-gray-700">
          <!-- Nom (truncate seulement sur grands √©crans) -->
          <span class="font-semibold block sm:inline sm:truncate sm:max-w-[36ch]">{{ dive.name }}</span>

          <!-- Meta courte (mobile) -->
          <span class="block sm:hidden text-gray-600">
            {{ dive.location }} ‚Ä¢ {{ dive.date | date:'d MMM √† HH:mm' }}
          </span>

          <!-- Meta longue (‚â• sm) -->
          <span class="hidden sm:inline text-gray-600">
            ‚Äì {{ dive.location }} ‚Ä¢ {{ dive.date | date:'EEEE d MMMM √† HH:mm' }}
          </span>
        </p>

        <!-- Bouton -->
        <button type="button" (click)="sendRemindEmail(dive._id)" class="order-3 sm:order-none w-full sm:w-auto justify-center inline-flex items-center gap-1.5
           rounded-full px-3 sm:px-4 py-2 sm:py-1.5 text-xs sm:text-sm font-semibold
           bg-blue-600 text-white hover:bg-blue-700 active:bg-blue-800
           focus:outline-none focus:ring-2 focus:ring-blue-500/40 transition whitespace-nowrap"
          aria-label="Envoyer un rappel">
          <mat-icon class="!text-base -ml-0.5">send</mat-icon>
          <span class="sm:hidden">Envoyer</span>
          <span class="hidden sm:inline">Envoyer un rappel</span>
        </button>
      </li>

      }
    </ul>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de plong√©e pr√©vue pour cette semaine.</p>
  }

  @if (weekEquipment.length) {
  <div class="mb-4">
    <h3 class="font-semibold text-gray-700 mb-2">R√©visions mat√©riel :</h3>
    <div class="flex flex-wrap gap-2">
      @for (eq of weekEquipment; track eq._id) {
      <span class="inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-gray-50">
        <mat-icon class="!text-base text-gray-600">build</mat-icon>
        {{ eq.name }}
      </span>
      }
    </div>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de mat√©riel √† r√©viser pour cette semaine.</p>
  }

  @if (weekBoats.length) {
  <div>
    <h3 class="font-semibold text-gray-700 mb-2">R√©visions bateaux :</h3>
    <div class="flex flex-wrap gap-2">
      @for (boat of weekBoats; track boat._id) {
      <span class="inline-flex items-center gap-1.5 rounded-full border px-2.5 py-1 text-xs bg-gray-50">
        <mat-icon class="!text-base text-gray-600">directions_boat</mat-icon>
        {{ boat.name }}
      </span>
      }
    </div>
  </div>
  } @else {
  <p class="text-sm text-gray-500 italic">Pas de bateaux √† r√©viser pour cette semaine.</p>
  }
</section>

<!-- üìã √Ä faire -->
<section class="bg-white shadow rounded-xl p-6">
  <h2 class="text-2xl font-bold text-blue-700 mb-4">üìã √Ä faire</h2>
  <app-kanban />
</section>
