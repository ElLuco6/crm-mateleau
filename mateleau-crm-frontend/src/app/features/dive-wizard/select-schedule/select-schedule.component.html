<div class="schedule-container">
  @if (formGroup) {
   
  
<div [formGroup]="formGroup"  class="schedule-form">
  <mat-form-field appearance="fill">
    <mat-label>Nom de la plongée</mat-label>
    <input matInput formControlName="diveName" required>
  </mat-form-field>
  
  <mat-form-field appearance="fill">
    <mat-label>Date de début</mat-label>
    <input matInput [matDatepicker]="picker" formControlName="startDate" required>
    <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
    <mat-datepicker #picker></mat-datepicker>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Heure de début</mat-label>
    <input
      matInput
      [ngxMatTimepicker]="timePicker"
      formControlName="startTime"
      ngxMatTimepickerFormat="HH:mm"
      placeholder="Choisir l'heure"
      required
      readonly
      [format]="24"
    />
    <ngx-mat-timepicker-toggle matSuffix [for]="timePicker"></ngx-mat-timepicker-toggle>
    <ngx-mat-timepicker #timePicker ></ngx-mat-timepicker>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Localisation</mat-label>
    <mat-select formControlName="location" required>
      <mat-option *ngFor="let loc of location" [value]="loc">{{ loc }}</mat-option>
    </mat-select>
  </mat-form-field>
  
  

  <mat-form-field appearance="fill">
    <mat-label>Durée (minutes)</mat-label>
    <input matInput type="number" formControlName="duration" required min="1">
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Profondeur maximale (m)</mat-label>
    <input matInput type="number" formControlName="maxDepth" required>

  </mat-form-field>

  <!-- Affiche la liste des bateaux disponibles -->
  @if (boats.length > 0) {
    <div  class="available-boats">
      <mat-form-field appearance="fill">
        <mat-label>Select your boat</mat-label>
        <mat-select formControlName="boat">
          <mat-option *ngFor="let boat of boats" [value]="boat">
            {{ boat.name }} -  Place availiable : {{boat.numberMaxPlaces}}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <button mat-raised-button color="accent" (click)="showBoatForm()" *ngIf="!boatForm">
      Ajouter un bateau
    </button>
  }
  
</div>


  <!--Add Boats-->


@if (boatForm === true) {
  <div [formGroup]="newBoatForm" class="new-boat-form">
    <h3>Ajouter un nouveau bateau</h3>
  <mat-form-field appearance="fill">
    <mat-label>Nom du bateau</mat-label>
    <input matInput formControlName="name" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Nombre maximum de places</mat-label>
    <input matInput type="number" formControlName="numberMaxPlaces" required>
  </mat-form-field>

  <mat-form-field appearance="fill">
    <mat-label>Date de révision</mat-label>
    <input matInput type="date" formControlName="revisionDate" required>
  </mat-form-field>

  <button mat-raised-button color="primary" (click)="addNewBoat()" [disabled]="newBoatForm.invalid">
    Ajouter le bateau
  </button>
  </div>

}
  }

</div>